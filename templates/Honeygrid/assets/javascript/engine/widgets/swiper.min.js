"use strict";gambio.widgets.module("swiper",[gambio.source+"/libs/events",gambio.source+"/libs/responsive"],function(e){var i=$(this),t=$("body"),n=null,s=null,l=null,a=null,r=!0,o=null,d=null,p=!0,u=null,c=null,f=!1,v=!1,w={pagination:".swiper-pagination",nextButton:".swiper-button-next",prevButton:".swiper-button-prev",paginationClickable:!0,loop:!0,autoplay:3,autoplayDisableOnInteraction:!1},g={sliderOptions:null,controls:null,target:null,initSlide:null,autoOff:!1,disableTranslucenceFix:!1,breakpoints:[{breakpoint:40,usePreviewBullets:!1,slidesPerView:2,centeredSlides:!0},{breakpoint:60,usePreviewBullets:!0,slidesPerView:3},{breakpoint:80,usePreviewBullets:!0,slidesPerView:3},{breakpoint:100,usePreviewBullets:!0,slidesPerView:5}]},b=$.extend({},g,e),h={},m=function(e,i,t){var s=n.eq(i),l=s.find("img"),a=l.attr("alt"),r=s.data("thumbImage");return r?'<img src="'+r+'" alt="'+a+'" class="'+t+'" />':""},S=function(){var e=i.find(".swiper-slide-active").index();return e=f?e-1:e,e=e||0},O=function(e){n=i.find(".swiper-slide:not(.swiper-slide-duplicate)"),e=f?e+1:e,n.removeClass("active").eq(e).addClass("active")},P=function(){try{o&&o.stopAutoplay()}catch(e){}},y=function(){try{o&&o.startAutoplay()}catch(e){}},x=function(e,t){e.stopPropagation(),O(t),v=!0,i.off("mouseleave.swiper"),o.stopAutoplay();var s=f?t+1:t;s>n.length&&(s=0),o.slideTo(s),v=!1},T=function(e){e.preventDefault(),e.stopPropagation();var i=$(this),t=i.index();t=f?t-1:t,O(t),l.trigger(jse.libs.template.events.SWIPER_GOTO(),t)},k=function(){if(!v){var e=S(),i=n.length-2;e=e<0?n.length-3:f&&e===i?e-i:e,O(e),s.trigger(jse.libs.template.events.SWIPER_GOTO(),e)}},I=function(){!b.disableTranslucenceFix&&d&&"fade"===d.effect&&(i.find(".swiper-slide").filter(":not(.swiper-slide-active)").fadeTo(300,0,function(){$(this).css("visibility","hidden")}),i.find(".swiper-slide").filter(".swiper-slide-active").fadeTo(300,1,function(){$(this).css("visibility","")}))},B=function(){var e=u||{},t=jse.libs.template.responsive.breakpoint(),n=b.breakpoints[0]||{},l=null;if(t.id!==e.id&&(u=$.extend({},t),$.each(b.breakpoints,function(e,i){return!(i.breakpoint>t.id)&&(l=e,void(n=i))}),b.sliderOptions&&b.sliderOptions.breakpoints&&$.each(b.sliderOptions.breakpoints,function(e,i){if(i.breakpoint===t.id)return n=i,!1}),l!==c||r)){if(d=$.extend({},w,b.sliderOptions||{},n),d.usePreviewBullets&&p&&(d.paginationBulletRender=m),d.autoplay=d.autoplay?1e3*d.autoplay:0,1===i.find(".swiper-slide").length&&(d.loop=!1),o){d.initialSlide=S();try{o.destroy(!0,!0)}catch(a){o=null}}else d.initialSlide=b.initSlide||d.initialSlide||0;var v=i.find(".swiper-slide:not(.swiper-slide-duplicate)");if(!b.autoOff||v.length>d.slidesPerView&&b.autoOff){i.addClass("swiper-is-active").removeClass("swiper-is-not-active");try{o=new Swiper(i,d)}catch(g){return}o.off("onTransitionEnd onSlideChangeStart").on("onTransitionEnd",I),s.length&&o.on("onSlideChangeStart",k),i.off("mouseenter.swiper mouseleave.swiper "+jse.libs.template.events.SWIPER_GOTO()+" "+jse.libs.template.events.SLIDES_UPDATE()).on("mouseenter.swiper",P).on("mouseleave.swiper",y).on(jse.libs.template.events.SWIPER_GOTO(),x).on(jse.libs.template.events.SLIDES_UPDATE(),E),r&&(f=!!i.find(".swiper-slide-duplicate").length);var h=r&&b.initSlide?b.initSlide:S();O(h),s.length&&(s.attr("data-swiper-init-slide",h),k()),r=!1}else i.removeClass("swiper-is-active").addClass("swiper-is-not-active"),r=!0}},E=function(e,t){$.each(t,function(e,i){var t=e+"-category",s=[],l=[],r=a.html();n.filter("."+t).each(function(){var e=$(this),i=e.data().swiperSlideIndex;i=void 0===i?e.index():i,l.push(i)}),o.removeSlide(l),$.each(i||[],function(e,i){i.className=t,i.srcattr='src="'+i.src+'"',s.push(Mustache.render(r,i))}),o.appendSlide(s)}),n=i.find(".swiper-slide"),O(0);var s=f?1:0;o.slideTo(s,0)},j=function(){$(b.sliderOptions.nextButton).on("selectstart",function(){return!1}),$(b.sliderOptions.prevButton).on("selectstart",function(){return!1})},C=function(){var e=$(".swiper-container-vertical .swiper-slide").css("height");$(".align-middle").css("height",e)};return h.init=function(e){n=i.find(".swiper-slide"),s=$(b.controls),l=$(b.target),a=i.find("template"),n.each(function(){if(!$(this).data().thumbImage)return p=!1,!1}),t.on(jse.libs.template.events.BREAKPOINT(),B),B(),b.target&&i.on("click.swiper",".swiper-slide",T),$(document).ready(function(){$(".swiper-vertical .swiper-slide[data-index]").css("display","inline-block"),$(".product-info-image .swiper-slide[data-index]").css("z-index","inherit"),$(".product-info-image .swiper-slide[data-index] .swiper-slide-inside img.img-responsive").fadeIn(1e3)}),I(),j(),C(),t.on(jse.libs.template.events.BREAKPOINT(),function(){C()}),e()},h});