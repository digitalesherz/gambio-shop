"use strict";gambio.widgets.module("product_question",["xhr",gambio.source+"/libs/modal.ext-magnific",gambio.source+"/libs/modal"],function(o){var t=$(this),n=$("body"),e={btnOpen:".btn-product-question",btnClose:".btn-close-question-window",btnSend:".btn-send-question",url:"shop.php?do=ProductQuestion",sendUrl:"shop.php?do=ProductQuestion/Send",productId:0,formSelector:"#product-question-form",productFormSelector:".js-product-form"},r=$.extend(!0,{},e,o),c={},i=function(){try{var o=$("#privacy_accepted"),n=!1;if(t.find(".form-group.mandatory, .checkbox-inline").removeClass("has-error"),t.find(".form-group.mandatory").each(function(){var o=$(this).find(".form-control");""===o.val()&&($(this).addClass("has-error"),n=!0)}),o.length&&!o.prop("checked")&&(o.closest(".checkbox-inline").addClass("has-error"),n=!0),n)throw new Error;return!0}catch(e){return!1}},d=function(){var o=$(r.productFormSelector).serialize();jse.libs.xhr.get({url:r.url+"&"+o+"&productId="+r.productId},!0).done(function(o){a(),n.append(o.content),gambio.widgets.init($(".mfp-wrap")),u()})},a=function p(){$(".mfp-bg, .mfp-wrap").remove(),$(r.btnSend).off("click",s),$(r.btnClose).off("click",p)},s=function(){if(i()){var o=$(r.productFormSelector).serialize(),t=r.sendUrl+"&"+o+"&productId="+r.productId,e=$(r.formSelector).serialize()+"&productLink="+location.href;$.ajax({url:t,data:e,type:"POST",dataType:"json"}).done(function(o){a(),n.append(o.content),gambio.widgets.init($(".mfp-wrap")),o.success||u()})}},u=function(){"function"==typeof window.showRecaptcha&&setTimeout(function(){window.showRecaptcha("captcha_wrapper")},500)};return c.init=function(o){void 0===r.modalMode&&$(r.btnOpen).on("click",d),$(r.btnSend).on("click",s),$(r.btnClose).on("click",a),o()},c});